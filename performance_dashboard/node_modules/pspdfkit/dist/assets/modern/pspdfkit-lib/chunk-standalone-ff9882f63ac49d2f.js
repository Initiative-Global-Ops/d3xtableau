/*!
 * PSPDFKit for Web 2021.4.2 (https://pspdfkit.com/web)
 * 
 * Copyright (c) 2016-2019 PSPDFKit GmbH. All rights reserved.
 * 
 * THIS SOURCE CODE AND ANY ACCOMPANYING DOCUMENTATION ARE PROTECTED BY INTERNATIONAL COPYRIGHT LAW
 * AND MAY NOT BE RESOLD OR REDISTRIBUTED. USAGE IS BOUND TO THE PSPDFKIT LICENSE AGREEMENT.
 * UNAUTHORIZED REPRODUCTION OR DISTRIBUTION IS SUBJECT TO CIVIL AND CRIMINAL PENALTIES.
 * This notice may not be removed from this file.
 * 
 * PSPDFKit uses several open source third-party components: https://pspdfkit.com/acknowledgements/web/
 */
(window.webpackJsonpPSPDFKit=window.webpackJsonpPSPDFKit||[]).push([[62],{562:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(2),o=n.n(r),i=n(4),s=n(1),a=n(3),c=n(18);class u{constructor(){o()(this,"cachedAPStreams",Object(i.b)()),o()(this,"pageAPStreamsPromises",Object(i.b)()),o()(this,"annotationAPStreamPromises",Object(i.b)())}cachedRenderAnnotation(t,e,n,r){var o;const i=this.provider;Object(a.k)(i instanceof i.constructor,"Backend can only use backend annotation provider");const u=t instanceof s.fb?null===(o=i._readStateCallbacks)||void 0===o?void 0:o.getFormFieldByName(t.formFieldName):null,d=!u||u instanceof s.N?null:new s.s({name:u.name,value:void 0!==u.formattedValue?u.formattedValue:"string"==typeof u.value?u.value:u.values});if(!Object(c.t)(t,u))return this.renderAnnotation(t,d,e,n,r);let l=!1,f=()=>{l=!0};return{promise:new Promise((async(o,i)=>{const s=e=>{const n=this.annotationAPStreamPromises.get(t.id);n&&(this.annotationAPStreamPromises=this.annotationAPStreamPromises.delete(t.id),n(e))},a=this.annotationAPStreamPromises.get(t.id);this.annotationAPStreamPromises=this.annotationAPStreamPromises.set(t.id,o),a&&a(null);try{const i=this.pageAPStreamsPromises.get(t.pageIndex);if(!i){const e=new Promise((e=>{this.annotationAPStreamPromises=this.annotationAPStreamPromises.set(t.id,e)}));return void o(await e)}await i;const a=this.cachedAPStreams.get(t.pageIndex);if(a){const e=a?a.get(t.id):null;if(e)return void s(e)}const{promise:c,cancel:u}=this.renderAnnotation(t,d,e,n,r);if(l)s(null);else{f=u;const e=await c;s(e),e&&this.cacheAPStream(e,t)}}catch(t){i(t)}})),cancel:f}}cacheAPStream(t,e){let n=this.cachedAPStreams.get(e.pageIndex);n||(this.cachedAPStreams=this.cachedAPStreams.set(e.pageIndex,Object(i.b)()),n=this.cachedAPStreams.get(e.pageIndex)),Object(a.k)(n);const r=n.get(e.id);r&&r.release(),this.cachedAPStreams=this.cachedAPStreams.setIn([e.pageIndex,e.id],t)}clearAllPageAPStreams(t){const e=this.cachedAPStreams.get(t);e&&(e.forEach((t=>t.release())),this.cachedAPStreams=this.cachedAPStreams.delete(t)),this.pageAPStreamsPromises=this.pageAPStreamsPromises.delete(t)}clearPageAPStreams(t,e){const n=this.cachedAPStreams.get(t);n&&(n.filter(((t,n)=>e.has(n))).forEach((t=>t.release())),this.cachedAPStreams=this.cachedAPStreams.updateIn([t],(t=>t.filter(((t,n)=>!e.has(n))))))}}},563:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(132),o=n(4),i=n(3),s=n(246);function a(t){return Object(i.k)(Array.isArray(t),"Wrong `json` field"),Object(o.a)(t.map((t=>(Object(i.k)("number"==typeof t.pageIndex,"Wrong `pageIndex` field"),Object(i.k)("string"==typeof t.previewText,"Wrong `previewText` field"),Object(i.k)(Array.isArray(t.rangeInPreview),"Wrong `rangeInPreview` field"),Object(i.k)(Array.isArray(t.rectsOnPage),"Wrong `rectsOnPage` field"),new s.a({pageIndex:t.pageIndex,previewText:t.previewText,locationInPreview:t.rangeInPreview[0],lengthInPreview:t.rangeInPreview[1],rectsOnPage:Object(o.a)(t.rectsOnPage).map((t=>Object(r.a)(t))),isAnnotation:!!t.isAnnotation,annotationRect:t.annotationRect?Object(r.a)(t.annotationRect):null})))).filter(Boolean))}},564:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(4),o=n(8);function i(){return!0}class s{constructor(t){this.queue=Object(r.c)(),this.priorityQueue=Object(r.c)(),this.inFlightRequests=Object(r.b)(),this.inflightRequestLimit=t,this.isDestroyed=!1}enqueue(t,e=!1){if(this.isDestroyed)return{promise:new Promise((()=>{})),cancel:()=>{}};let n=null,o=null;const i=new Promise(((t,e)=>{n=t,o=e})),s=e?this.priorityQueue:this.queue,a=Object(r.j)(s,t,{promise:i,resolve:n,reject:o});return e?this.priorityQueue=a:this.queue=a,e?this.next():setTimeout((()=>this.next()),35),{promise:i,cancel:()=>this._cancel(t)}}_cancel(t){this.queue.has(t)&&(this.queue=this.queue.delete(t)),this.priorityQueue.has(t)&&(this.priorityQueue=this.priorityQueue.delete(t)),this.inFlightRequests.has(t)&&(this.inFlightRequests=this.inFlightRequests.delete(t))}cancelAll(){this.queue=Object(r.c)(),this.priorityQueue=Object(r.c)(),this.inFlightRequests=Object(r.b)()}_requestFinished(t,e){if(this.isDestroyed)return;const n=this.inFlightRequests.get(t);n&&(n.resolve(e),this.inFlightRequests=this.inFlightRequests.delete(t)),this.next()}_requestFailed(t,e){if(this.isDestroyed)return;const n=this.inFlightRequests.get(t);n&&(n.reject(e),this.inFlightRequests=this.inFlightRequests.delete(t)),this.next()}next(){if(!(this.isDestroyed||this.inFlightRequests.size>=this.inflightRequestLimit)){if(this.priorityQueue.size>=1){const t=this.priorityQueue.findLastEntry(i);Object(o.a)(t);const[e,n]=t;return this.priorityQueue=this.priorityQueue.delete(e),this.inFlightRequests=this.inFlightRequests.set(e,n),void e.request().then((t=>this._requestFinished(e,t))).catch((t=>this._requestFailed(e,t)))}if(this.queue.size>=1){const t=this.queue.findEntry(i);Object(o.a)(t);const[e,n]=t;this.queue=this.queue.delete(e),this.inFlightRequests=this.inFlightRequests.set(e,n),e.request().then((t=>this._requestFinished(e,t))).catch((t=>this._requestFailed(e,t)))}}}destroy(){this.isDestroyed=!0}}},565:function(t,e,n){"use strict";function r(t,e,n,r,o,i){let s;return t.has(n)?s=t.get(n):(s=o.toString(),e[s]=n,t.set(n,s)),{...r,[i]:s}}n.d(e,"a",(function(){return r}))},578:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return f}));var r=n(2),o=n.n(r),i=n(579),s=n.n(i),a=n(4),c=n(3),u=n(147),d=n(8);const l=()=>{};class f{constructor(){o()(this,"_worker",new s.a),o()(this,"_requests",Object(a.b)()),o()(this,"_nextRequestId",1),o()(this,"_isLoading",!0),o()(this,"_loadPromise",null),o()(this,"_initPromise",null),o()(this,"_hasOpenedDocument",!1),o()(this,"_hasLoadedCertificates",!1),o()(this,"_handleMessage",(t=>{const e=t.data,n=this._requests.get(e.id);Object(d.a)(n,`No request was made for id ${e.id}.`);const{resolve:r,reject:o}=n;if(this._requests=this._requests.delete(e.id),e.error){const t=new c.a(e.error);t.callArgs=e.callArgs,o(t)}else r(e.result)})),this._worker.onmessage=this._handleMessage}loadNativeModule(t,{mainThreadOrigin:e,disableWebAssembly:n,disableWebAssemblyStreaming:r,enableAutomaticLinkExtraction:o,overrideMemoryLimit:i}){return Object(d.a)(!this._hasOpenedDocument,"cannot invoke `loadNativeModule` while an instance is still in use. Please call `recycle` first."),this._loadPromise?this._loadPromise.then((()=>{})):(this._initPromise||(this._initPromise=this._sendRequest("loadNativeModule",[t,{mainThreadOrigin:e,disableWebAssembly:n,disableWebAssemblyStreaming:r,enableAutomaticLinkExtraction:o,overrideMemoryLimit:i}]).then((t=>t)).catch((t=>{throw this._isLoading=!1,this._worker.terminate(),t}))),this._initPromise)}load(t,e,{mainThreadOrigin:n,customFonts:r}){return Object(d.a)(!this._hasOpenedDocument,"cannot invoke `load` while an instance is still in use. Please call `recycle` first."),this._loadPromise||(this._loadPromise=this._sendRequest("load",[t,e,{mainThreadOrigin:n,customFonts:r}]).then((t=>(this._isLoading=!1,t))).catch((t=>{throw this._isLoading=!1,this._worker.terminate(),t}))),this._loadPromise}version(){return this._assertLoaded(),this._sendRequest("version")}openDocument(t,e){return this._assertLoaded(),this._hasOpenedDocument=!0,this._sendRequest("openDocument",[t,e]).catch((t=>{throw this._hasOpenedDocument=!1,t}))}async openDocumentAt(){throw new Error("Should never be called")}async enablePDFJavaScriptSupport(){return this._assertLoaded(),this._sendRequest("enablePDFJavaScriptSupport")}async runPDFFormattingScripts(){return this._assertLoaded(),this._sendRequest("runPDFFormattingScripts")}getBookmarks(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getBookmarks")}getFormJSON(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getFormJSON")}evalFormValuesActions(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("evalFormValuesActions",[t])}evalScript(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("evalScript",[t,e])}getFormValues(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getFormValues")}closeDocument(){return this._assertLoaded(),this._hasOpenedDocument=!1,this._sendRequest("closeDocument")}renderTile(t,e,n,r,o,i,s){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("renderTile",[t,e,n,r,o,i,s])}renderAnnotation(t,e,n,r,o){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("renderAnnotation",[t,e,n,r,o])}renderPageAnnotations(t,e,n,r,o){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("renderPageAnnotations",[t,e,n,r,o])}renderDetachedAnnotation(t,e,n,r,o){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("renderDetachedAnnotation",[t,e,n,r,o])}onKeystrokeEvent(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("onKeystrokeEvent",[t])}getAttachment(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getAttachment",[t])}textForPageIndex(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("textForPageIndex",[t])}annotationsForPageIndex(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("annotationsForPageIndex",[t])}createAnnotation(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("createAnnotation",[t,e])}updateAnnotation(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("updateAnnotation",[t])}deleteAnnotation(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("deleteAnnotation",[t])}createFormField(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("createFormField",[t,e])}updateFormField(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("updateFormField",[t,e])}deleteFormField(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("deleteFormField",[t])}setFormFieldValue(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("setFormFieldValue",[t])}deleteFormFieldValue(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("deleteFormFieldValue",[t])}createBookmark(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("createBookmark",[t])}updateBookmark(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("updateBookmark",[t])}deleteBookmark(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("deleteBookmark",[t])}getTextFromRects(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getTextFromRects",[t,e])}search(t,e,n,r,o=u.a.TEXT){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("search",[t,e,n,r,o])}exportFile(t=!1,e=!1,n,r="pdf"){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("exportFile",[t,e,n,r])}importXFDF(t,e=!1){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("importXFDF",[t,e])}exportXFDF(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("exportXFDF",[])}importInstantJSON(t){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("importInstantJSON",[t])}exportInstantJSON(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("exportInstantJSON",[])}getDocumentOutline(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getDocumentOutline")}applyOperations(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("applyOperations",[t,e])}reloadDocument(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("reloadDocument")}exportPDFWithOperations(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("exportPDFWithOperations",[t,e])}loadCertificates(t){return this._assertLoaded(),this._assertDocumentOpen(),this._hasLoadedCertificates=Boolean(t.length),this._sendRequest("loadCertificates",[t]).catch((t=>{throw this._hasLoadedCertificates=!1,t}))}getSignaturesInfo(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("getSignaturesInfo",[])}prepareSignInvisible(t,e){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("prepareSignInvisible",[t,e])}sign(t,e,n){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("sign",[t,e,n])}restoreToOriginalState(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("restoreToOriginalState")}applyRedactions(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("applyRedactions",[])}readFormJSONObjects(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("readFormJSONObjects")}clearAPStreamCache(){return this._assertLoaded(),this._assertDocumentOpen(),this._sendRequest("clearAPStreamCache")}recycle(){this._hasLoadedCertificates&&this.loadCertificates([]),this._hasOpenedDocument&&this.closeDocument(),this._isLoading||(this._requests=this._requests.map((()=>({resolve:l,reject:l}))))}destroy(){this._loadPromise=null,this._worker.terminate()}_assertLoaded(){if(this._isLoading)throw new c.a("CoreClient not yet initialized")}_assertDocumentOpen(){if(!this._hasOpenedDocument)throw new c.a("This method can not be called since there is no open document. Have you run PSPDFKit.unload()?")}_sendRequest(t,e=[]){return new Promise(((n,r)=>{const o=this._assignId(),i=e.filter((t=>t instanceof ArrayBuffer));this._worker.postMessage({id:o,action:t,args:e},i),this._requests=this._requests.set(o,{resolve:n,reject:r})}))}_assignId(){const t=this._nextRequestId;return this._nextRequestId=this._nextRequestId+1,t}}},579:function(t,e,n){t.exports=function(){return n(580)('/*!\n * PSPDFKit for Web 2021.4.2 (https://pspdfkit.com/web)\n * \n * Copyright (c) 2016-2019 PSPDFKit GmbH. All rights reserved.\n * \n * THIS SOURCE CODE AND ANY ACCOMPANYING DOCUMENTATION ARE PROTECTED BY INTERNATIONAL COPYRIGHT LAW\n * AND MAY NOT BE RESOLD OR REDISTRIBUTED. USAGE IS BOUND TO THE PSPDFKIT LICENSE AGREEMENT.\n * UNAUTHORIZED REPRODUCTION OR DISTRIBUTION IS SUBJECT TO CIVIL AND CRIMINAL PENALTIES.\n * This notice may not be removed from this file.\n * \n * PSPDFKit uses several open source third-party components: https://pspdfkit.com/acknowledgements/web/\n */!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=64)}([function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return c})),n.d(e,"b",(function(){return u}));var r={};n.r(r),n.d(r,"KEYCODE_0",(function(){return f})),n.d(r,"KEYCODE_F",(function(){return d})),n.d(r,"KEYCODE_G",(function(){return l})),n.d(r,"KEYCODE_J",(function(){return p})),n.d(r,"KEYCODE_K",(function(){return h})),n.d(r,"KEYCODE_P",(function(){return m})),n.d(r,"KEYCODE_Z",(function(){return y})),n.d(r,"KEYCODE_ENTER",(function(){return b})),n.d(r,"KEYCODE_ESC",(function(){return g})),n.d(r,"KEYCODE_SPACE",(function(){return w})),n.d(r,"KEYCODE_PGDOWN",(function(){return v})),n.d(r,"KEYCODE_PGUP",(function(){return O})),n.d(r,"KEYCODE_LEFT",(function(){return E})),n.d(r,"KEYCODE_UP",(function(){return _})),n.d(r,"KEYCODE_RIGHT",(function(){return j})),n.d(r,"KEYCODE_DOWN",(function(){return x})),n.d(r,"KEYCODE_PLUS",(function(){return F})),n.d(r,"KEYCODE_MINUS",(function(){return S})),n.d(r,"KEYCODE_BACKSPACE",(function(){return A})),n.d(r,"KEYCODE_TAB",(function(){return I})),n.d(r,"KEYCODE_DELETE",(function(){return k}));const o=function t(e){let n;return n=e instanceof Error?e:new Error(e),Object.setPrototypeOf(n,t.prototype),n};o.prototype=Object.create(Error.prototype,{name:{value:"PSPDFKitError",enumerable:!1}});var i=o;function a(t,e){if(!t)throw new i(`Assertion failed: ${e||"Condition not met"}\\n\\nFor further assistance, please go to: https://pspdfkit.com/support/request`)}n(2);function s(t){console.log(t)}function c(t){console.warn(t)}function u(t){console.error(t)}["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",\'[tabindex]:not([tabindex^="-"])\'].join(",");const f=48,d=70,l=71,p=74,h=75,m=80,y=90,b=13,g=27,w=32,v=34,O=33,E=37,_=38,j=39,x=40,F=187,S=189,A=8,I=9,k=46},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n(31))},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(3);t.exports=!r((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(5),o=n(18),i=n(13);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){"use strict";function r(t=navigator.userAgent){return t.indexOf("Trident/")>-1?"trident":t.indexOf("Edge/")>-1?"edge":t.indexOf("Chrome/")>-1?"blink":t.indexOf("AppleWebKit/")>-1?"webkit":t.indexOf("Gecko/")>-1?"gecko":"unknown"}function o(t,e){const n=new RegExp(` ${e}/(\\\\d+)\\\\.*`);let r;return(r=t.match(n))?Number(r[1]):0}function i(t=navigator.userAgent){return t.indexOf("Win")>-1?"windows":t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1?"ios":t.indexOf("Mac")>-1?"macos":t.indexOf("Android")>-1?"android":t.indexOf("Linux")>-1?"linux":"unknown"}n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c}));const a=r(),s=i(),c=(function(t=navigator.userAgent){switch(r(t)){case"trident":return o(t,"Trident");case"edge":return o(t,"Edge");case"blink":return o(t,"Chrome");case"webkit":return o(t,"Version");case"gecko":return o(t,"Firefox");default:;}}(),function(t=i(),e=r()){"ios"===t||"android"===t||u(e)}(),"trident"===a);"ios"===s||u();function u(t=r()){return"webkit"===t&&"undefined"!=typeof TouchEvent}},function(t,e,n){var r=n(33),o=n(34);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(1),o=n(7);t.exports=function(t,e){try{o(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(44),o=n(1),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t])||i(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]}},function(t,e,n){var r=n(5),o=n(32),i=n(13),a=n(9),s=n(15),c=n(4),u=n(16),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=a(t),e=s(e,!0),u)try{return f(t,e)}catch(t){}if(c(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(6);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can\'t convert object to primitive value")}},function(t,e,n){var r=n(5),o=n(3),i=n(17);t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(1),o=n(6),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(5),o=n(16),i=n(19),a=n(15),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(i(t),e=a(e,!0),i(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(6);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(21),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return o.call(t)}),t.exports=r.inspectSource},function(t,e,n){var r=n(1),o=n(10),i="__core-js_shared__",a=r[i]||o(i,{});t.exports=a},function(t,e){t.exports={}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return g}));var r=n(25),o=n.n(r),i=n(26),a=n.n(i),s=n(27),c=n.n(s),u=n(28),f=n.n(u),d=n(0),l=n(8);const p="modern/pspdfkit-lib/",h=`${p}pspdfkit${"-"+a.a}.wasm.js`,m=`${p}pspdfkit${"-"+o.a}.wasm`,y=`${p}pspdfkit${"-"+c.a}.asm.js`,b=`${p}pspdfkit${"-"+f.a}.asm.js.mem`;function g(t,e,n,r,o=self){return new Promise((async i=>{const a=!n&&function(t){try{if(/Version\\/11\\..*Safari/i.test(t.navigator.userAgent))return!1}catch(t){}return"object"==typeof t.WebAssembly&&"function"==typeof t.WebAssembly.instantiate}(o),s=function(t,e,n){let r;0;const o={wasmBinaryFile:t+m,locateFile:e=>"pspdfkit.asm.js.mem"===e?t+b:e,wasmBinary:r};if(n){const t=fetch(o.wasmBinaryFile,{credentials:"same-origin"});o.instantiateWasm=(n,r)=>((async()=>{Object(d.d)(`Start ${o.wasmBinaryFile} download.`);const i=Date.now();let a,s;const c=!e&&"function"==typeof WebAssembly.instantiateStreaming;function u(){return t.then((t=>{if(!t.ok)throw new Error(`Error loading ${o.wasmBinaryFile}: ${t.statusText}`);return t.arrayBuffer()})).then((t=>(s=Date.now(),Object(d.d)(`Download complete, took: ${s-i}ms`),WebAssembly.instantiate(new Uint8Array(t),n))))}if(c){if("edge"===l.a){const t=WebAssembly.instantiateStreaming;WebAssembly.instantiateStreaming=function(e,n){return Promise.resolve(e).then((e=>t(e,n)))}}a=WebAssembly.instantiateStreaming(t,n).then((t=>(s=Date.now(),Object(d.d)(`Download and Instantiation complete, took: ${Date.now()-i}ms`),t))).catch((t=>{if(/mime.*type/i.test(t.message))return Object(d.b)(t.message),null;throw t}))}else a=u();let f=await a;null===f&&(Object(d.b)("Streaming instantiation failed! Falling back to classic instantiation. This might result in slower initialization time therefore we highly recommend to follow the troubleshooting instructions in our guides to fix this error: https://pspdfkit.com/guides/web/current/troubleshooting/common-issues/#response-has-unsupported-mime-type-error."),f=await u()),!c&&s&&Object(d.d)(`Compilation and Instantiation complete, took: ${Date.now()-s}ms`),r(f.instance)})(),{})}return o}(t,r,a),c=a?await w(`${t}${h}`):await w(`${t}${y}`);Object(d.d)(`Using ${a?"WASM":"ASM.js"} method`),function(t,e){t.PSPDFLoggingServices={error(t,e){Object(d.b)(`[${t}] ${e}`)},warn(t,e){Object(d.e)(`[${t}] ${e}`)},info(t,e){0},debug(t,e){0},trace(t,e){0}},t.BEEE5011DDCD4E47A799CDE7C2262CE6={stats(t){const n=JSON.parse(t);return n.bundle_id=function(t){let e;e=t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0];return e=e.split(":")[0],e=e.split("?")[0],e=e.split("#")[0],e=e.split("/")[0],e}(e),n.pspdf_version="2021.4.2",n.system_version=navigator.userAgent,n.preferred_locale=navigator.language,JSON.stringify(n)}}}(o,e);const u=await c(s);i({nativeModule:u});if(!(void 0!==o.crypto)){0;const{FS:t}=u,e=function(){return 256*Math.random()|0};t.unlink("/dev/random"),t.unlink("/dev/urandom"),t.createDevice("/dev","random",e),t.createDevice("/dev","urandom",e)}}))}function w(e){return"object"==typeof t&&"object"==typeof t.versions&&void 0!==t.versions.node?Promise.resolve(n(63)(e)):"object"==typeof window?new Promise(((t,n)=>{const r=document.createElement("script");r.type="text/javascript",r.async=!0,r.onload=()=>t(window.PSPDFModuleInit),r.onerror=n,r.src=e;const{documentElement:o}=document;Object(d.c)(o),o.appendChild(r)})):(self.importScripts(e),Promise.resolve(self.PSPDFModuleInit))}}).call(this,n(62))},function(t,e){t.exports="791cf64366b6637b"},function(t,e){t.exports="20bb29dc46c0e6eb"},function(t,e){t.exports="cb362560d2e00d22"},function(t,e){t.exports="1ff914bd6c12b3cb"},function(t,e,n){var r=n(30),o=n(1),i=n(53);r({global:!0,bind:!0,enumerable:!0,forced:!o.setImmediate||!o.clearImmediate},{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){var r=n(1),o=n(12).f,i=n(7),a=n(35),s=n(10),c=n(42),u=n(52);t.exports=function(t,e){var n,f,d,l,p,h=t.target,m=t.global,y=t.stat;if(n=m?r:y?r[h]||s(h,{}):(r[h]||{}).prototype)for(f in e){if(l=e[f],d=t.noTargetGet?(p=o(n,f))&&p.value:n[f],!u(m?f:h+(y?".":"#")+f,t.forced)&&void 0!==d){if(typeof l==typeof d)continue;c(l,d)}(t.sham||d&&d.sham)&&i(l,"sham",!0),a(n,f,l,t)}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(3),o=n(14),i="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can\'t call method on "+t);return t}},function(t,e,n){var r=n(1),o=n(7),i=n(4),a=n(10),s=n(20),c=n(36),u=c.get,f=c.enforce,d=String(String).split("String");(t.exports=function(t,e,n,s){var c=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,l=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||i(n,"name")||o(n,"name",e),f(n).source=d.join("string"==typeof e?e:"")),t!==r?(c?!l&&t[e]&&(u=!0):delete t[e],u?t[e]=n:o(t,e,n)):u?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},function(t,e,n){var r,o,i,a=n(37),s=n(1),c=n(6),u=n(7),f=n(4),d=n(38),l=n(22),p=s.WeakMap;if(a){var h=new p,m=h.get,y=h.has,b=h.set;r=function(t,e){return b.call(h,t,e),e},o=function(t){return m.call(h,t)||{}},i=function(t){return y.call(h,t)}}else{var g=d("state");l[g]=!0,r=function(t,e){return u(t,g,e),e},o=function(t){return f(t,g)?t[g]:{}},i=function(t){return f(t,g)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var r=n(1),o=n(20),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},function(t,e,n){var r=n(39),o=n(41),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e,n){var r=n(40),o=n(21);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.5.0",mode:r?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!1},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(4),o=n(43),i=n(12),a=n(18);t.exports=function(t,e){for(var n=o(e),s=a.f,c=i.f,u=0;u<n.length;u++){var f=n[u];r(t,f)||s(t,f,c(e,f))}}},function(t,e,n){var r=n(11),o=n(45),i=n(51),a=n(19);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(1);t.exports=r},function(t,e,n){var r=n(46),o=n(50).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(4),o=n(9),i=n(47).indexOf,a=n(22);t.exports=function(t,e){var n,s=o(t),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~i(u,n)||u.push(n));return u}},function(t,e,n){var r=n(9),o=n(48),i=n(49),a=function(t){return function(e,n,a){var s,c=r(e),u=o(c.length),f=i(a,u);if(t&&n!=n){for(;u>f;)if((s=c[f++])!=s)return!0}else for(;u>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(23),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(3),o=/#|\\.prototype\\./,i=function(t,e){var n=s[a(t)];return n==u||n!=c&&("function"==typeof e?r(e):!!e)},a=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";t.exports=i},function(t,e,n){var r,o,i,a=n(1),s=n(3),c=n(14),u=n(54),f=n(56),d=n(17),l=n(57),p=a.location,h=a.setImmediate,m=a.clearImmediate,y=a.process,b=a.MessageChannel,g=a.Dispatch,w=0,v={},O="onreadystatechange",E=function(t){if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},_=function(t){return function(){E(t)}},j=function(t){E(t.data)},x=function(t){a.postMessage(t+"",p.protocol+"//"+p.host)};h&&m||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++w]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(w),w},m=function(t){delete v[t]},"process"==c(y)?r=function(t){y.nextTick(_(t))}:g&&g.now?r=function(t){g.now(_(t))}:b&&!l?(i=(o=new b).port2,o.port1.onmessage=j,r=u(i.postMessage,i,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||s(x)?r=O in d("script")?function(t){f.appendChild(d("script")).onreadystatechange=function(){f.removeChild(this),E(t)}}:function(t){setTimeout(_(t),0)}:(r=x,a.addEventListener("message",j,!1))),t.exports={set:h,clear:m}},function(t,e,n){var r=n(55);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r=n(11);t.exports=r("document","documentElement")},function(t,e,n){var r=n(58);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(t,e,n){var r=n(11);t.exports=r("navigator","userAgent")||""},function(t,e,n){n(60),t.exports=self.fetch.bind(self)},function(t,e,n){"use strict";n.r(e),n.d(e,"Headers",(function(){return h})),n.d(e,"Request",(function(){return O})),n.d(e,"Response",(function(){return _})),n.d(e,"DOMException",(function(){return x})),n.d(e,"fetch",(function(){return F}));var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r&&r,o="URLSearchParams"in r,i="Symbol"in r&&"iterator"in Symbol,a="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in r,c="ArrayBuffer"in r;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(t){return t&&u.indexOf(Object.prototype.toString.call(t))>-1};function d(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\\-#$%&\'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function p(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function m(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function b(t){var e=new FileReader,n=y(e);return e.readAsArrayBuffer(t),n}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:a&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:o&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():c&&a&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(t)||f(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var t=m(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=m(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(b)}),this.text=function(){var t,e,n,r=m(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=y(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(t,e){t=d(t),e=l(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},h.prototype.delete=function(t){delete this.map[d(t)]},h.prototype.get=function(t){return t=d(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(d(t))},h.prototype.set=function(t,e){this.map[d(t)]=l(e)},h.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},h.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),p(t)},h.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),p(t)},h.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),p(t)},i&&(h.prototype[Symbol.iterator]=h.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function O(t,e){if(!(this instanceof O))throw new TypeError(\'Please use the "new" operator, this DOM object constructor cannot be called as a function.\');var n,r,o=(e=e||{}).body;if(t instanceof O){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),v.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function E(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\\+/g," "),o=n.join("=").replace(/\\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}})),e}function _(t,e){if(!(this instanceof _))throw new TypeError(\'Please use the "new" operator, this DOM object constructor cannot be called as a function.\');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})},w.call(O.prototype),w.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var j=[301,302,303,307,308];_.redirect=function(t,e){if(-1===j.indexOf(e))throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})};var x=r.DOMException;try{new x}catch(t){(x=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),x.prototype.constructor=x}function F(t,e){return new Promise((function(n,o){var i=new O(t,e);if(i.signal&&i.signal.aborted)return o(new x("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new h,t.replace(/\\r?\\n[\\t ]+/g," ").split("\\r").map((function(t){return 0===t.indexOf("\\n")?t.substr(1,t.length):t})).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();e.append(r,o)}})),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;setTimeout((function(){n(new _(o,r))}),0)},s.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){o(new x("Aborted","AbortError"))}),0)},s.open(i.method,function(t){try{return""===t&&r.location.href?r.location.href:t}catch(e){return t}}(i.url),!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&(a?s.responseType="blob":c&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!e||"object"!=typeof e.headers||e.headers instanceof h?i.headers.forEach((function(t,e){s.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){s.setRequestHeader(t,l(e.headers[t]))})),i.signal&&(i.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",u)}),s.send(void 0===i._bodyInit?null:i._bodyInit)}))}F.polyfill=!0,r.fetch||(r.fetch=F,r.Headers=h,r.Request=O,r.Response=_)},function(t,e){Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var e=isNaN(arguments[0])?1:Number(arguments[0]);return e?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,t.call(r,e-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0})},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,u=[],f=!1,d=-1;function l(){f&&c&&(f=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!f){var t=s(l);f=!0;for(var e=u.length;e;){for(c=u,u=[];++d<e;)c&&c[d].run();d=-1,e=u.length}c=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new h(t,e)),1!==u.length||f||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){function n(t){var e=new Error("Cannot find module \'"+t+"\'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=63},function(t,e,n){"use strict";n.r(e);n(29),n(59),n(61);"object"==typeof window&&(window._babelPolyfill=!1);var r=n(0),o=n(2),i=n.n(o),a=n(8),s=n(24);function c(t){const e=new FileReader;return new Promise(((n,r)=>{e.onerror=t=>{r(new Error(t))},e.onload=t=>{var e;n(new Uint8Array(null===(e=t.target)||void 0===e?void 0:e.result))},e.readAsArrayBuffer(t)}))}const u="text",f="/create.pdf",d="/save.pdf";let l=null,p=!1,h=!1,m=null,y=[],b=null,g=null;function w(t){return null!=t&&null!=t.length&&0===t.length}function v(t,...e){Object(r.c)(l,"WebAssembly/asm.js module not loaded.");const n=e.map((t=>w(t)?JSON.stringify(t):t)),o=l[t](...n)||\'{ "success": true }\',i=JSON.parse(o);if(!i.success)throw new Error(i.error);return i}function O(t,...e){Object(r.c)(l,"WebAssembly/asm.js module not loaded.");const n=e.map((t=>w(t)?JSON.stringify(t):t)),o=l[t](...n);return o}function E(t,e={}){Object(r.c)(l,"WebAssembly/asm.js module not loaded.");const n=JSON.stringify({type:t,...e});const o=l.dispatchCommand(n,0,0);if(o.hasError()){const e=new Error(o.getErrorMessage()||"There was an error while executing the command: "+t);throw o.delete(),e}const i=[];for(let t=0;t<o.getRepliesCount();t++)o.hasJSONReply(t)&&i.push(JSON.parse(o.getJSONReply(t))),o.hasBinaryReply(t)&&i.push(o.getBinaryReply(t).slice(0));return o.delete(),i}function _(t,e){return`${t}/${e}.pdf`}async function j(t,e){const n=Math.random().toString(36).slice(-5),o=await Promise.all(Object.entries(e).map((async([e,r])=>(t.forEach((t=>{t.document===e&&"importDocument"===t.type?t.document=_(n,e):(t.dataFilePath===e&&"applyInstantJson"===t.type||t.dataFilePath===e&&"applyXfdf"===t.type)&&(t.dataFilePath=_(n,e))})),{basename:e,buffer:await c(r)}))));return o.forEach((t=>{!function(t,e,n){Object(r.c)(l),l.FS.analyzePath(t).exists||l.FS.mkdir(t),l.FS.writeFile(_(t,e),n)}(n,t.basename,t.buffer)})),function(){o.forEach((t=>{!function(t,e){Object(r.c)(l),l.FS.unlink(_(t,e))}(n,t.basename)}))}}function x(){h=!0;const t=v("configurePDFJavaScriptSupport",!0);return Object(r.c)(t.success,"An error occurred while executing the document level JavaScript."),t.changes||[]}function F(t,e){let n;try{n=E("edit_document",{save_path:e,operations:t})}catch(t){throw new Error(`Error applying operations to document: ${t.message}`)}return n}function S(){return E("read_form_json_objects")}function A(t){let e;try{e=E("apply_form_json_objects",{form_fields_with_widgets:t})}catch(t){throw new Error("Error applying form JSON objects to /create.pdf: "+t.message)}return e}function I(t,e,n,o,i){let a,s;Object(r.c)("number"==typeof t.pageIndex,"Annotation must have a pageIndex");try{if(Object(r.c)("number"==typeof t.pdfObjectId,"Cannot call renderAnnotation() for an annotation without pdfObjectId."),s=O("renderAnnotation",i,t.pdfObjectId,t.pageIndex,0,n,o,!1),s.hasError()||1!==s.getRepliesCount()){const t=s.getErrorMessage(),e=s.getErrorReason();throw new Error(e+": "+t)}a=s.getBinaryReply(0).slice(0)}catch(t){Object(r.e)(t.message)}finally{s&&s.delete()}return a}const k=new class{constructor(){i()(this,"_pdfObjectIdsForIds",{})}loadNativeModule(t,{mainThreadOrigin:e,disableWebAssembly:n,disableWebAssemblyStreaming:r,enableAutomaticLinkExtraction:o,overrideMemoryLimit:i}){return g=Date.now(),p=o,m=i,Object(s.a)(t,e,n,r).then((({nativeModule:t})=>{l=t;const e=v("PSPDFKitVersion").version;if(1!==e)throw new Error(`Native version mismatch. Please update the dependencies. Expected 1 but got ${e}.`)}))}async load(t,e,{mainThreadOrigin:n,customFonts:o}){let i;Object(r.c)(l,"WebAssembly/asm.js module not loaded.");try{const t=o?"/fonts":"";o&&!l.FS.analyzePath(t).exists&&function(t,e){Object(r.c)(l),l.FS.mkdir(e),l.FS.mount(l.FS.filesystems.WORKERFS,{blobs:t},e)}(o,t),i=l.initPSPDFKit(null==e?"":e,n,t,"")}catch(t){if(void 0===t.message&&a.b)return;throw t}const s=JSON.parse(i);if(g&&Object(r.d)(`Native initialization complete, took: ${Date.now()-g}ms`),!s.success)throw new Error("Failed to initialize PSPDFKit: "+s.error);return s}async openDocument(t,e){try{Object(r.c)(l),null!==m&&v("overrideMemoryLimit",m),b=e,l.FS.writeFile(f,new Uint8Array(t));const n=v("openDocument",f,JSON.stringify({password:b}));return v("automaticLinkExtraction",p),n.documentInfo}finally{this._pdfObjectIdsForIds={}}}async reloadDocument(){try{v("closeDocument");const t=v("openDocument",f,JSON.stringify({password:b}));return h&&x(),v("automaticLinkExtraction",p),t.documentInfo}finally{this._pdfObjectIdsForIds={}}}async enablePDFJavaScriptSupport(){return x()}async runPDFFormattingScripts(){let t;Object(r.c)(h,"PDF Formatting Scripts can only run after JavaScript is enabled.");try{t=E("run_pdf_formatting_scripts")}catch(t){throw new Error("An error occurred while executing the document level JavaScript formatting.\\n\\n"+t.message)}return t[0].changes||[]}async openDocumentAt(){throw new Error("Should never be called")}async getBookmarks(){const t=E("get_bookmarks");return Object(r.c)(1===t.length,"expected only one response for getBookmarks"),t[0].bookmarks||[]}async getFormJSON(){return v("getFormJSON").formJSON}async getFormValues(){return v("getFormValues").formValues}async setFormValues(t){v("setFormValues",JSON.stringify(t))}async setFormFieldValue(t){this.setFormValues([t])}async applyOperations(t,e){const n=await j(t,e),r=F(t,f);return n(),r}async exportPDFWithOperations(t,e){const n=await j(t,e);let o;Object(r.c)(l);try{F(t,d),o=l.FS.readFile(d).buffer}catch(t){throw new Error("Error applying operations: "+t.message)}return n(),o}async getSignaturesInfo(){try{return E("get_signatures",{certificate_check_time:"current_time"})[0]}catch(t){throw new Error(`Error getting signatures info: ${t.message}`)}}async prepareSignInvisible(t,e){let n;const o=[];try{n=E("get_signatures",{certificate_check_time:"current_time"})[0];const t="not_signed"!==n.status;v("saveDocument",d,!1,t,false,false,"pdf",o),v("openDocument",d,JSON.stringify({password:b}))}catch(t){throw new Error(`Error saving document backup for invisible signing: ${t}`)}try{const t=!e&&"not_signed"!==n.status;v("saveDocument",f,e,t,false,false,"pdf",o),e&&(v("openDocument",f,JSON.stringify({password:b})),h&&x())}catch(t){throw new Error(`Error saving document for invisible signing: ${t}`)}let i;try{i=E("prepare_sign_invisible",{signer_data_source:{...t,type:"pspdfkit/signer-data-source"},signature_metadata:{type:"pspdfkit/signature-metadata"}})}catch(t){throw new Error(`Error preparing document for invisible signing: ${t}`)}Object(r.c)(l);const a=l.FS.readFile(i[0].result.file_contents).buffer;return l.FS.unlink(i[0].result.file_contents),{file:i[0].result.file,hash:i[0].result.hash,signatureFormFieldName:i[0].result.signature_form_fqn,dataToBeSigned:i[0].result.data_to_be_signed,fileContents:a}}async sign(t,e,n){let r;try{r=E("sign",{password:b,save_path:f,file_path:t,signature_form_fqn:e,pkcs7_container:n}),v("openDocument",f,JSON.stringify({password:b})),h&&x()}catch(t){throw new Error(`Error signing document: ${t}`)}return r[0].result}async restoreToOriginalState(){try{v("openDocument",d,JSON.stringify({password:b})),h&&x();const t="not_signed"!==E("get_signatures",{certificate_check_time:"current_time"})[0].status;v("saveDocument",f,!1,t,!1,!1,"pdf",[]),v("openDocument",f,JSON.stringify({password:b})),h&&x()}catch(t){throw new Error(`Could not restore backup document: ${t}`)}}async evalFormValuesActions(t){const e=E("set_form_values_get_script_changes",{form_values:t});return Object(r.c)(1===e.length,"expected only one response for evalFormValuesActions"),e[0].changes}async readFormJSONObjects(){return S()}async evalScript(t,e){const n=E("run_pdf_javascript",{pdf_javascript_contents:t,pdf_javascript_form_fqn:e});return Object(r.c)(1===n.length,"expected only one response for evalScript"),n[0].changes}closeDocument(){try{return y=[],b=null,h=!1,v("closeDocument")}finally{this._pdfObjectIdsForIds={}}}async renderTile(t,e,n,o,i,a,s){Object(r.c)(l);const c=E("render_tile",{render_annotations:Boolean(i||a),print_rendering:o,page:t,bitmap_width:n.width,bitmap_height:n.height,bitmap_x:n.left,bitmap_y:n.top,page_width:e.width,page_height:e.height,skip_ap_streams:[],format:s});if("bitmap"===s)return c[0];const u=new Blob([c[0]],{type:`image/${s}`});return URL.createObjectURL(u)}async renderAnnotation(t,e,n,r,o){return I({...t,pdfObjectId:this._getPdfObjectIdForObject(t)},e&&await c(e),n,r,o)}async renderPageAnnotations(t,e,n,r,o){return e.map(((e,i)=>I({pdfObjectId:e,pageIndex:t},0,n[i],r[i],o)))}async renderDetachedAnnotation(t,e,n,o,i){Object(r.c)(l);const a=e?await c(e):null,s=e?e.type:null;let u,f;const d=new l.VectorUint8;try{if(null!=a)for(let t=0;t<a.byteLength;t++)d.push_back(a[t]);if(f=O("renderDetachedAnnotation",i,JSON.stringify({...t,pdfObjectId:this._getPdfObjectIdForObject(t),pageIndex:0}),0,n,o,d,s||"",!1),f.hasError()||1!==f.getRepliesCount()){const t=f.getErrorMessage(),e=f.getErrorReason();throw new Error(e+": "+t)}u=f.getBinaryReply(0).slice(0)}finally{d&&d.delete(),f&&f.delete()}return u}async loadCertificates(t){if(E("load_certificates",{certificates:t}).length>0)throw new r.a("Internal error while loading certificates")}async getAttachment(t){let e,n,r;try{if(n=O("getAnnotationAttachment",t),n.hasError()||1!==n.getRepliesCount()){const t=n.getErrorMessage(),e=n.getErrorReason();throw new Error("Error fetching attachment: "+e+", "+t)}r=JSON.parse(n.getJSONReply(0)).encoding,e=n.getBinaryReply(0).slice(0)}finally{n&&n.delete()}return[e,r]}async textForPageIndex(t){return v("textForPageIndex",t).textBlocks}async annotationsForPageIndex(t){return v("annotationsForPageIndex",t).annotations}async createAnnotation(t,e){Object(r.c)(l),Object(r.c)("number"==typeof t.pageIndex,"Annotation must have a pageIndex");const n=t.pdfObjectId,o=e?await c(e):null;let i;const a=new l.VectorUint8;try{if(null!=o)for(let t=0;t<o.byteLength;t++)a.push_back(o[t]);i=v("createAnnotation",JSON.stringify({...t,pdfObjectId:null}),a)}finally{a&&a.delete()}return"number"==typeof n&&"number"==typeof this._pdfObjectIdsForIds[n.toString()]&&delete this._pdfObjectIdsForIds[n.toString()],this._pdfObjectIdsForIds[t.id||i.pdfObjectId.toString()]=i.pdfObjectId,i.pdfObjectId}async updateAnnotation(t){const e={...t,pdfObjectId:this._getPdfObjectIdForObject(t)};if(Object(r.c)(e.id,"Annotation must have an ID"),Object(r.c)("number"==typeof e.pageIndex,"Annotation must have a pageIndex"),"pspdfkit/widget"===e.type){const n=S(),r="number"==typeof e.pdfObjectId?e.pdfObjectId.toString():e.id;A(n.map((t=>t.formField.annotationIds.includes(r)||t.formField.annotationIds.includes(String(e.pdfObjectId))?{...t,widgets:t.widgets.map((t=>t.id===r||String(t.pdfObjectId)===r?e:t))}:t)));const o=S().find((e=>e.formField.name===t.formFieldName));if(!o)throw new Error(`Error updating form field in /create.pdf: updated form field with name ${e.formFieldName} not found.`);if(!o.widgets.some((t=>t.pdfObjectId===e.pdfObjectId)))throw new Error(`Error updating widget in /create.pdf: updated widget in form field with name ${e.formFieldName} not found: ${e}`)}else v("updateAnnotation",JSON.stringify(e),0,0)}async deleteAnnotation(t){if(t.APStreamCache&&await this.updateAnnotation(t),"pspdfkit/widget"===t.type)try{const e=t.id;A(S().map((n=>{if(n.formField.annotationIds.includes(e)||n.formField.annotationIds.includes(String(t.pdfObjectId))){let t;if(("pspdfkit/form-field/checkbox"===n.formField.type||"pspdfkit/form-field/radio"===n.formField.type)&&n.formField.options.length===n.formField.annotationIds.length){const r=n.formField.annotationIds.indexOf(e);t=n.formField.options.filter(((t,e)=>e!==r))}const r=n.widgets.filter((t=>e!==(t.id||String(t.pdfObjectId)))),o=n.formField.annotationIds.filter((t=>t!==e));return r.length>0&&o.length>0?{...n,formField:{...n.formField,annotationIds:o,...t?{options:t}:null},widgets:r}:null}return n})).filter(Boolean))}catch(t){throw t}else try{E("remove_annotations",{annotation_ids:[this._getPdfObjectIdForObject(t)]})}catch(e){Object(r.e)(`Removing annotation failed for annotation: ${JSON.stringify(t)}`)}delete this._pdfObjectIdsForIds[t.id||t.pdfObjectId.toString()]}async createFormField(t,e){A(S().concat([{type:"pspdfkit/form-field-with-widgets",formField:t,widgets:e}]));const n=S().find((e=>e.formField.name===t.name));if(!n)throw new Error(`Error creating new form field in /create.pdf: created form field not found. ${JSON.stringify({type:"pspdfkit/form-field-with-widgets",formField:t,widgets:e})}`);n.widgets.forEach((t=>{this._pdfObjectIdsForIds[t.id]=t.pdfObjectId}))}async updateFormField(t,e){const n=S(),r=n.find((e=>e.formField.name===t.name));if(!r)throw new Error(`Error updating form field with name "${t.name}" in /create.pdf: form field not found. ${JSON.stringify(n)}`);A(n.map((n=>n.formField.name===t.name?{type:"pspdfkit/form-field-with-widgets",formField:{...n.formField,...t},widgets:e.reduce(((t,e)=>[...t,{...n.widgets.find((t=>t.id===e.id||t.pdfObjectId===e.pdfObjectId)),...e}]),[]),...void 0!==n.value?{value:n.value}:null}:n)));if(!S().find((e=>e.formField.name===t.name)))throw new Error(`Error updating form field "${t.name}" in /create.pdf: updated form field not found. ${JSON.stringify({type:"pspdfkit/form-field-with-widgets",formField:t,widgets:e})}`);r.widgets.forEach((t=>{e.some((e=>e.id===t.id))||delete this._pdfObjectIdsForIds[t.id]}))}async deleteFormField(t){const e=S(),n=e.find((e=>e.formField.name===t.name));if(!n)return;A(e.filter((e=>e.formField.name!==t.name)));const r=S().find((e=>e.formField.name===t.name));if(r)throw new Error(`Error deleting form field with name "${t.name}" in /create.pdf: form field still present. ${JSON.stringify(r)}`);n.widgets.forEach((t=>{delete this._pdfObjectIdsForIds[t.id]}))}async deleteFormFieldValue(t){A(S().map((e=>e.formField.name===t?{formField:e.formField,widgets:e.widgets,type:e.type}:e)))}async createBookmark(t){try{E("append_bookmarks",{bookmarks:[t]})}catch(t){throw new Error(`Error creating new bookmark in /create.pdf: ${t.message}`)}}async updateBookmark(t){try{var e;E("remove_bookmarks",{bookmarkIds:[null!==(e=t.id)&&void 0!==e?e:t.pdfBookmarkId]}),E("append_bookmarks",{bookmarks:[t]})}catch(t){throw new Error(`Error updating bookmark in /create.pdf: ${t.message}`)}}async deleteBookmark(t){try{E("remove_bookmarks",{bookmarkIds:[t]})}catch(t){throw new Error(`Error deleting bookmark in /create.pdf: ${t.message}`)}}async getTextFromRects(t,e){return v("getTextFromRects",t,JSON.stringify(e.map((t=>[t.left,t.top,t.width,t.height])))).text}async search(t,e,n,r,o=u){return E("search",{query:t,start_index:e,limit:n,case_sensitive:r,search_type:o})}async exportFile(t,e,n,o){let i={mimeType:"application/pdf",extension:"pdf"};try{const r=v("saveDocument",d,t,e,!1,n,o,[])||{};r.format&&(i={mimeType:r.format.mime_type,extension:r.format.extension})}catch(t){throw new Error(`Error saving to /save.pdf: ${t.message}`)}Object(r.c)(l);return[l.FS.readFile(d).buffer,i]}async importXFDF(t,e){y.push({source:t,keepCurrentAnnotations:e}),e||function(t=[],e=[]){t.push("pspdfkit/widget"),v("removeAllAnnotations",JSON.stringify(t),JSON.stringify(e))}(),v("importXFDF",t)}async exportXFDF(){return v("exportXFDF",[],[]).XFDF}async importInstantJSON(t){v("importInstantDocumentJSON",JSON.stringify(t))}async exportInstantJSON(){const t=v("exportInstantDocumentJSON");return JSON.parse(t.InstantDocumentJSON)}async getDocumentOutline(){const t=E("get_outline");return Object(r.c)(1===t.length,"expected only one response for getDocumentOutline"),t[0].outline||[]}async onKeystrokeEvent(t){const e=E("on_keystroke_event",{pdf_javascript_event:t});Object(r.c)(1===e.length,"expected only one response for onKeystrokeEvent");const n=e[0].changes||[];return Object(r.c)(n.length>0&&4===n[0].change_type,"expected onKeystrokeEvent to return at least one JavaScript Event change."),n}async version(){return v("PSPDFKitVersion").version}getImportedXFDF(){return y}async applyRedactions(){try{return v("saveDocument",f,!1,!1,!0,!1,"pdf",[])||{}}catch(t){throw new Error(`Error applying redactions and saving to /create.pdf: ${t.message}`)}}async clearAPStreamCache(){v("clearAPStreamCache")}_getPdfObjectIdForObject(t){return"number"==typeof t.pdfObjectId?t.pdfObjectId:this._pdfObjectIdsForIds[t.id]}},D=self;D.global=D,D.module={},D.onmessage=async({data:t})=>{let e,n=null;try{const r=await k[t.action](...t.args);if(e={id:t.id,result:r},Array.isArray(r)){const t=r.filter((t=>t instanceof ArrayBuffer));t.length>0&&(n=t)}r instanceof ArrayBuffer&&(n=[r])}catch(r){const o=t.args.filter((t=>t instanceof ArrayBuffer));o.length>0&&(n=o),e={id:t.id,error:r.message||r.toString(),callArgs:t.args}}D.postMessage(e,n||void 0)}}]);',null)}},580:function(t,e,n){"use strict";var r=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),n=n.getBlob()}catch(e){n=new Blob([t])}return new Worker(r.createObjectURL(n))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},648:function(t,e,n){"use strict";n.r(e),n.d(e,"corePool",(function(){return $})),n.d(e,"validateStandaloneConfiguration",(function(){return K})),n.d(e,"normalizeCoreOptions",(function(){return W})),n.d(e,"default",(function(){return H})),n.d(e,"customFontsPromiseRef",(function(){return G})),n.d(e,"loadModule",(function(){return Q}));var r=n(145),o=n(4),i=n(3),s=n(2),a=n.n(s),c=n(28),u=n(299),d=n(18),l=n(562),f=n(179),h=n(9),p=n(563),m=n(41),b=n(125),y=n(123),g=n(261),O=n(229),_=n(8);class w extends(o.e({alreadyLoadedPages:Object(o.b)(),isLoaded:!1})){}const v={skippedPdfObjectIds:[],skippedPdfBookmarkIds:[],annotations:[],bookmarks:[],formFieldValues:[],formFields:[],attachments:{}};class F{constructor(t,e){a()(this,"_state",new w),a()(this,"_formFieldsLoadedPromise",null),a()(this,"_objectCreationPromises",Object(o.b)()),a()(this,"_loadBookmarksPromise",null),a()(this,"canCreateBackendOrphanWidgets",!1),this._core=t,this._json=e?j(e):null}async load(){if(this._state=this._state.set("isLoaded",!0),!this._formFieldCallbacks&&await this._loadFormFieldValues(),!this._json)return this;await this._core.importInstantJSON({...v,...this._json}),Object(_.a)(this._json);const{annotations:t,attachments:e}=this._json;if(!e||0===Object.entries(e).length)return this;if(t)for(let n=0;n<t.length;n++){let r=null;if(t[n].imageAttachmentId){const o=e?e[t[n].imageAttachmentId]:null;if(o)try{r=Object(y.a)(atob(o.binary),o.contentType),Object(_.a)(this._annotationCallbacks),this._annotationCallbacks.createAttachment(t[n].imageAttachmentId,r)}catch(e){Object(i.j)(`Skipped attachment with id ${t[n].imageAttachmentId} from payload because an error occurred while converting the binary image to blob.`),Object(i.j)(e)}}}return this}destroy(){}setReadStateCallbacks(t){this._readStateCallbacks=t}setAnnotationCallbacks(t){this._annotationCallbacks=t}setBookmarkCallbacks(t){this._bookmarkCallbacks=t}setFormFieldCallbacks(t){this._formFieldCallbacks=t}setFormFieldValueCallbacks(t){this._formFieldValueCallbacks=t}setCommentCallbacks(){}createComment(){return Promise.reject("Comments are not supported in Standalone.")}deleteComment(){return Promise.reject("Comments are not supported in Standalone.")}updateComment(){return Promise.reject("Comments are not supported in Standalone.")}createAnnotation(t,e){this._verifyLoaded();const n=e.find(((e,n)=>n===t.imageAttachmentId));return this._core.createAnnotation(Object(m.o)(t),n?n.data:null).then((e=>{"number"==typeof e&&"number"==typeof t.pdfObjectId&&t.pdfObjectId!==e&&(Object(_.a)(this._annotationCallbacks),this._annotationCallbacks.updateAnnotations(Object(o.a)([t.set("pdfObjectId",e)])))}))}updateAnnotation(t){return this._verifyLoaded(),this._core.updateAnnotation(Object(m.o)(t))}deleteAnnotation(t){return this._verifyLoaded(),this._core.deleteAnnotation(Object(m.o)(t))}createBookmark(t){return this._verifyLoaded(),this._core.createBookmark(Object(b.b)(t))}updateBookmark(t){return this._verifyLoaded(),this._core.updateBookmark(Object(b.b)(t))}deleteBookmark(t){return this._verifyLoaded(),this._core.deleteBookmark(t)}createFormField(t){this._verifyLoaded(),Object(_.a)(this._readStateCallbacks);const e=this._readStateCallbacks.getFormFieldWidgets(t);return this._core.createFormField(Object(m.r)(t),e.map(m.o).toArray())}updateFormField(t){this._verifyLoaded(),Object(_.a)(this._readStateCallbacks);const e=this._readStateCallbacks.getFormFieldWidgets(t);return this._core.updateFormField(Object(m.r)(t),e.map(m.o).toArray())}deleteFormField(t){return this._verifyLoaded(),this._core.deleteFormField(Object(m.r)(t))}loadFormFields(){return this._formFieldsLoadedPromise||(this._formFieldsLoadedPromise=this._loadFormFields()),this._formFieldsLoadedPromise}async _loadFormFields(){this._verifyLoaded();const t=await this._core.readFormJSONObjects();let e=Object(o.a)();const n=Object(o.a)().withMutations((n=>{t.forEach((t=>{const{formField:r,widgets:o,value:s}=t;try{let t;t=r.pdfObjectId?r.pdfObjectId.toString():Object(d.e)();const i=Object(m.e)(t,r);Object(_.a)(this._readStateCallbacks),this._readStateCallbacks.isFormFieldInState(i.name)||n.push(i.set("value",s)),o.forEach((t=>{let n;if(n=t.pdfObjectId?t.id||t.pdfObjectId.toString():Object(d.e)(),Object(_.a)(this._readStateCallbacks),!this._readStateCallbacks.isAnnotationInState(n)){const r=Object(m.c)(n,t);e=e.push(r)}}))}catch(t){Object(i.j)(`Skipped creating form field #${r.pdfObjectId} from payload because an error occurred while deserializing.`),Object(i.j)(t)}}))}));n.size>0&&(Object(_.a)(this._formFieldCallbacks),this._formFieldCallbacks.createFormFields(n,O.a)),await this._loadFormFieldValues(),e.size>0&&(Object(_.a)(this._annotationCallbacks),this._annotationCallbacks.createAnnotations(e,Object(o.b)(),O.a)),this._formFieldsLoadedPromise=Promise.resolve()}createFormFieldValue(t){return this._verifyLoaded(),this.setFormFieldValue(t)}setFormFieldValue(t){return this._verifyLoaded(),this._core.setFormFieldValue(Object(m.s)(t))}deleteFormFieldValue(t){return this._verifyLoaded(),this._core.deleteFormFieldValue(t.replace("form-field-value/",""))}loadAnnotationsForPageIndex(t){this._verifyLoaded();const e=this._state.alreadyLoadedPages.get(t);if(e)return e;const n=this._loadAnnotationsForPageIndex(t);return this._state=this._state.setIn(["alreadyLoadedPages",t],n),n}async _loadAnnotationsForPageIndex(t){const e=await this._core.annotationsForPageIndex(t);this._formFieldCallbacks&&await this.loadFormFields();const n=Object(o.a)().withMutations((t=>{e.filter((t=>!t.id||this._readStateCallbacks&&!this._readStateCallbacks.isAnnotationInState(t.id))).forEach((e=>{e.pdfObjectId;try{const n=e.id||e.pdfObjectId.toString(),r=Object(m.c)(n,e);t.push(r)}catch(t){Object(i.j)(`Skipped creating annotation #${e.pdfObjectId} from payload because an error occurred while deserializing.`),Object(i.j)(t)}}))}));n.size>0&&(Object(_.a)(this._annotationCallbacks),this._annotationCallbacks.createAnnotations(n,Object(o.b)(),O.a)),this._state=this._state.setIn(["alreadyLoadedPages",t],Promise.resolve())}async _loadFormFieldValues(){this._verifyLoaded();const t=await this._core.getFormValues(),e=Object(o.a)().withMutations((e=>{t.forEach((t=>{try{e.push(Object(m.f)(t))}catch(e){Object(i.j)(`Skipped creating form field value #${t.pdfObjectId} from payload because an error occurred while deserializing.`),Object(i.j)(e)}}))}));e.size>0&&(Object(_.a)(this._formFieldValueCallbacks),this._formFieldValueCallbacks.setFormFieldValues(e))}async loadBookmarks(){this._verifyLoaded();const t=await this._core.getBookmarks(),e=Object(o.a)().withMutations((e=>{t.forEach((t=>{let n;n=t.id?t.id:t.pdfBookmarkId?t.pdfBookmarkId:Object(g.a)();try{e.push(Object(b.a)(n,t))}catch(t){Object(i.j)(`Skipped creating bookmark #${n} from payload because an error occurred while deserializing.`),Object(i.j)(t)}}))}));e.size>0&&(Object(_.a)(this._bookmarkCallbacks),this._bookmarkCallbacks.createBookmarks(e,O.a))}_verifyLoaded(){Object(_.a)(this._state.isLoaded,"StandaloneProvider not properly initialized.")}async syncChanges(){}resetState(){this._state=new w}}function j(t){const e={};return Object.keys(t).forEach((n=>{Array.isArray(t[n])?e[n]=t[n].filter(Boolean):"object"==typeof t[n]&&null!==t[n]?e[n]=j(t[n]):e[n]=t[n]})),e}class S{constructor(t,e){this.identifier=t,this.callback=e}request(){return this.callback()}}var A=n(73);var k=n(564),P=n(245),E=n(131);class I extends(o.e({baseUrl:null,licenseKey:null,document:null,backendPermissions:new P.a,documentResponse:null,disableWebAssembly:!1,disableWebAssemblyStreaming:!1,enableAutomaticLinkExtraction:!1,overrideMemoryLimit:null,features:Object(o.a)(),signatureFeatureAvailability:E.a.NONE,documentHandle:null,trustedCAsCallback:null,signaturesInfoPromise:null,customFonts:null,forceLegacySignaturesFeature:!1})){}var D=n(203),x=n(35),C=n(177),L=n(565),R=n(39),T=n(202),N=n(132),B=n(147),q=n(122),J=n(162);let U;U=n(578).default;const $=new class{constructor(t){a()(this,"size",1),a()(this,"_freeObjects",[]),this._constructor=t}checkOut(){let t;return t=this._freeObjects.length>0?this._freeObjects.shift():new this._constructor,{object:t,checkIn:()=>{this._freeObjects.length>=this.size?t.destroy():(t.recycle(),this._freeObjects.push(t))}}}}(U);class M extends l.a{constructor(t){super(),a()(this,"type","STANDALONE"),a()(this,"_XFDF",null),K(t);const{baseUrl:e,instantJSON:n,XFDF:r,enableAutomaticLinkExtraction:o,overrideMemoryLimit:i,trustedCAsCallback:s}=t;"string"==typeof r&&(this._XFDF={source:r,keepCurrentAnnotations:!0===t.XFDFKeepCurrentAnnotations}),n&&n.annotations&&(n.annotations=n.annotations.map((t=>(t.id=t.id.toString(),t)))),this._instantJSON=n,"function"==typeof s&&(this._trustedCAsCallback=s);const{disableWebAssembly:c,disableWebAssemblyStreaming:u,customFonts:d}=t,{standaloneInstancesPoolSize:l}=t;void 0!==l&&($.size=l);const f=!!t.electronicSignatures&&Boolean(t.electronicSignatures.forceLegacySignaturesFeature);this._state=new I(W({baseUrl:e,licenseKey:t.licenseKey,document:t.document,disableWebAssembly:c,disableWebAssemblyStreaming:u,enableAutomaticLinkExtraction:o,overrideMemoryLimit:i,documentHandle:"0",customFonts:d,forceLegacySignaturesFeature:f})),this._requestQueue=new k.a(h.D);const{object:p,checkIn:m}=$.checkOut();this.client=p,this.checkIn=m;const b=n?{annotations:n.annotations||[],formFields:n.formFields||[],formFieldValues:n.formFieldValues||[],skippedPdfObjectIds:n.skippedPdfObjectIds||[],skippedPdfFormFieldIds:n.skippedPdfFormFieldIds||[],attachments:n.attachments||{},bookmarks:n.bookmarks||[],skippedPdfBookmarkIds:n.skippedPdfBookmarkIds||[],format:n.format,...n.pdfId?{pdfId:n.pdfId}:null}:null;this.provider=new F(this.client,b)}isUsingInstantProvider(){return!1}hasClientsPresence(){return!1}async load(t={}){return this._isPDFJavaScriptEnabled=t.isPDFJavaScriptEnabled,{features:this._state.features,signatureFeatureAvailability:this._state.signatureFeatureAvailability,hasPassword:!!t.password,allowedTileScales:"all",jsActionChanges:[]}}destroy(){this.provider&&this.provider.destroy(),this._requestQueue&&this._requestQueue.destroy(),this.checkIn()}async documentInfo(){return this._state.documentResponse}getDocumentHandle(){return this._state.documentHandle}getFormJSON(){return this.client.getFormJSON()}permissions(){return Promise.resolve(this._state.backendPermissions)}textForPageIndex(t){let e=!1;const n=new S(`${t}-text`,(()=>e?Promise.reject({aborted:!0}):this.client.textForPageIndex(t).then((n=>e?Promise.reject({aborted:!0}):Object(f.b)({textLines:n},t))))),{promise:r,cancel:o}=this._requestQueue.enqueue(n);return{promise:r,cancel:()=>{e=!0,o()}}}getTextFromRects(t,e){return this.client.getTextFromRects(t,e.toJS())}renderTile(t,e,n,r,o){const s=`${t}-${e.width}-${e.height}-${n.top}-${n.left}-${n.width}-${n.height}-${this.getDocumentHandle()}`,a=new S(s,(()=>{const s=o?o.annotations.filter(d.u).map(m.o).toJS():null,a=o?o.formFieldValues.map(m.s).toJS():null;return this.client.renderTile(t,e.toObject(),n.toObject(),r,s,a,q.b).then((r=>r?"string"==typeof r?Object(c.f)(r):Object(c.a)({buffer:r,width:n.width,height:n.height}):(Object(i.p)("The image buffer or URL is null, the tile cannot be rendered:",`page: ${t}, page size: ${e.toObject()}, tile rect: ${n.toObject()}`),Promise.resolve(null))))})),u=e.width===n.width&&e.height===n.height,{promise:l,cancel:f}=this._requestQueue.enqueue(a,u);return{promise:l,cancel:f}}renderAnnotation(t,e,n,r,o){const s=t.id,a=n&&n.data;Object(_.a)(this.provider instanceof F,"Standalone can only use standalone annotation provider");const u=new S(s,(()=>this.client.renderAnnotation(Object(m.o)(t),a,r,o,q.b).then((e=>e?Object(c.a)({buffer:e,width:r,height:o}):(Object(i.p)("The image buffer is null, the annotation cannot be rendered",t.toJS()),Promise.resolve(null))))));return this._requestQueue.enqueue(u,!1)}renderPageAnnotations(t,e,n){const r=this.provider;Object(_.a)(r instanceof F,"Standalone can only use standalone annotation provider");const o=e.filter((t=>{const{formField:e}=r._readStateCallbacks.getAnnotationWithFormField(t.id);return Object(d.t)(t,e)})),s=new Promise(((e,r)=>{this.client.renderPageAnnotations(t,o.map((t=>t.pdfObjectId)).toArray(),o.map((t=>t.boundingBox.width*n)).toArray(),o.map((t=>t.boundingBox.height*n)).toArray(),q.b).then((t=>{const r=t.map(((t,e)=>{const r=o.get(e);return r?t?Object(c.a)({buffer:t,width:r.boundingBox.width*n,height:r.boundingBox.height*n}):(Object(i.p)("The image buffer is null, the annotation cannot be rendered",r.toJS()),Promise.resolve(null)):Promise.resolve(null)}));Promise.all(r).then((t=>{t.forEach(((t,e)=>{const n=o.get(e);if(n&&t){const e=this.annotationAPStreamPromises.get(n.id);e&&e(t),this.cacheAPStream(t,n)}})),e()}))})).catch(r)}));return this.pageAPStreamsPromises=this.pageAPStreamsPromises.set(t,s),s}renderDetachedAnnotation(t,e,n,r){if(t.id)throw new i.a(`Detached annotations should not have an \`id\`: ${t.id}`);const o=Object(A.a)(),s=e&&e.data,a=new S(o,(()=>this.client.renderDetachedAnnotation(Object(m.o)(t),s,n,r,q.b).then((e=>e?Object(c.a)({buffer:e,width:n,height:r}):(Object(i.p)("The image buffer is null, the annotation cannot be rendered",t.toJS()),Promise.resolve(null)))))),{promise:u,cancel:d}=this._requestQueue.enqueue(a,!1);return{promise:u,cancel:d}}async getAttachment(t){const[e,n]=await this.client.getAttachment(t);return new Blob([e],{type:n})}async search(t,e,n,r,o=!1,i=B.a.TEXT){Object(_.a)(this.provider instanceof F,"Standalone can only use standalone annotation provider");const s=await this.client.search(t,e,n,r,i);return Object(p.a)(s.filter((t=>o||!t.isAnnotation)))}async searchAndRedact(t,e,n){Object(_.a)(this.provider instanceof F,"Standalone can only use standalone annotation provider");const{totalPages:r}=n,i=await this.client.search(t,0,r,e.caseSensitive,e.searchType);return Object(o.a)(i.filter((t=>e.searchInAnnotations||!t.isAnnotation)).map((t=>{const r=t.isAnnotation?[t.annotationRect]:t.rectsOnPage,i=Object(o.a)(r).map((t=>(Object(_.a)(t),Object(N.a)(t))));return new R.a({...Object(d.z)(n),...e.annotationPreset,pageIndex:t.pageIndex,rects:i,boundingBox:C.a.union(i)})})))}exportPDF({flatten:t=!1,incremental:e=!1,saveForPrinting:n=!1,format:r="pdf"}={}){return Object(_.a)(this.provider instanceof F,"Standalone can only use standalone annotation provider"),this.client.exportFile(t,e,n,r).then((([t,e])=>(t.mimeType=e.mimeType,t.extension=e.extension,t)))}exportXFDF(){return Object(_.a)(this.provider instanceof F,"Standalone can only use standalone annotation provider"),this.client.exportXFDF()}exportInstantJSON(){return Object(_.a)(this.provider instanceof F,"Standalone build requires Standalone annotation provider."),this.client.exportInstantJSON()}getPDFURL({includeComments:t=!0,saveForPrinting:e}={}){return this.generatePDFObjectURL({includeComments:t,saveForPrinting:e})}generatePDFObjectURL({includeComments:t=!0,saveForPrinting:e}={}){let n,r=!1;return{promise:new Promise((o=>{this.exportPDF({flatten:!0,includeComments:t,saveForPrinting:e}).then((t=>{if(r)return;const e=new Blob([t],{type:t.mimeType});n=window.URL.createObjectURL(e),o(n)}))})),revoke:()=>{n&&window.URL.revokeObjectURL(n),r=!0}}}async getDocumentOutline(){const t=await this.client.getDocumentOutline();return Object(o.a)(t.map(u.a))}async onKeystrokeEvent(t){return await this.client.onKeystrokeEvent(t)}async evalFormValuesActions(t){return Object(_.a)(this.provider instanceof F,"Standalone can only use standalone annotation provider"),this.client.evalFormValuesActions(t.map(m.s).toJS())}async evalScript(t,e){return Object(_.a)(this.provider instanceof F,"Standalone can only use standalone annotation provider"),this.client.evalScript(t,e)}async applyOperationsAndReload(t){Object(_.a)(this.provider instanceof F,"Standalone can only use standalone annotation provider");try{let e,n;({processedOperations:e,operationsDocuments:n}=await V(t)),await this.client.applyOperations(e,n)}catch(t){throw new i.a(`Applying operations failed: ${t}`)}return this.reloadDocument()}async applyRedactionsAndReload(){Object(_.a)(this.provider instanceof F,"Standalone can only use standalone annotation provider");try{await this.client.applyRedactions()}catch(t){throw new i.a(`Applying redactions failed: ${t}`)}return this.reloadDocument()}async reloadDocument(){try{this.provider=new F(this.client,null);const t=await this.client.reloadDocument();this._state=this._state.set("documentResponse",t).set("documentHandle",(parseInt(this._state.documentHandle)+1).toString()).set("signaturesInfoPromise",null);let e=[];if(this._isPDFJavaScriptEnabled){const t=await this.client.enablePDFJavaScriptSupport(),n=await this.client.runPDFFormattingScripts();e=Object(x.k)(t,n)}return{features:this._state.features,signatureFeatureAvailability:this._state.signatureFeatureAvailability,hasPassword:!1,allowedTileScales:"all",jsActionChanges:e}}catch(t){throw new i.a(`Reloading failed: ${t}`)}}async exportPDFWithOperations(t){try{let e,n;return Object(_.a)(this.provider instanceof F,"Standalone can only use standalone annotation provider"),({processedOperations:e,operationsDocuments:n}=await V(t)),this.client.exportPDFWithOperations(e,n)}catch(t){throw new i.a(`Exporting PDF with operations failed: ${t}`)}}getSignaturesInfo(){try{if(Object(_.a)(this.provider instanceof F,"Standalone can only use standalone annotation provider"),this._state.signaturesInfoPromise)return this._state.signaturesInfoPromise;const t=this.client.getSignaturesInfo().then((t=>Object(m.g)(t)));return this._state=this._state.set("signaturesInfoPromise",t),t}catch(t){throw new i.a(`Getting document signatures info: ${t}`)}}async refreshSignaturesInfo(){this._state=this._state.set("signaturesInfoPromise",null)}async loadCertificates(t){return this.client.loadCertificates(t)}async signDocumentAndReload(t,e){Object(_.a)("function"==typeof e,"Signing document failed: twoStepSignatureCallback must be a function");const n=t&&t.placeholderSize?{estimatedSize:t.placeholderSize}:null;Object(_.a)(this.provider instanceof F,"Standalone can only use standalone annotation provider");try{const{hash:r,signatureFormFieldName:o,file:s,fileContents:a}=await this.client.prepareSignInvisible(n,!!t&&Boolean(t.flatten));Object(_.a)("function"==typeof e,"twoStepSignatureCallback must be a function");const c=await e({hash:r,fileContents:a});let u;if(!(c instanceof ArrayBuffer))throw new i.a("Resolved value from twoStepSignatureCallback is of type "+typeof c+" and it must be an ArrayBuffer instead.");u=c,await this.client.sign(s,o,Object(D.a)(u)),await this.reloadDocument()}catch(t){throw await this.client.restoreToOriginalState(),t}}cancelRequests(){this._requestQueue.cancelAll()}async syncChanges(){}getDefaultGroup(){}isCollaborationPermissionsEnabled(){return!1}async clearAPStreamCache(){return this.client.clearAPStreamCache()}}function W(t){return{baseUrl:t.baseUrl,licenseKey:t.licenseKey,document:t.document,disableWebAssembly:!!t.disableWebAssembly,disableWebAssemblyStreaming:!!t.disableWebAssemblyStreaming,enableAutomaticLinkExtraction:!!t.enableAutomaticLinkExtraction,overrideMemoryLimit:"number"==typeof t.overrideMemoryLimit?t.overrideMemoryLimit:null,documentHandle:"number"==typeof t.documentHandle?t.documentHandle:"0",trustedCAsCallback:"function"==typeof t.trustedCAsCallback?t.trustedCAsCallback:null,customFonts:Array.isArray(t.customFonts)?t.customFonts.filter((t=>t instanceof J.a)):null,forceLegacySignaturesFeature:Boolean(t.forceLegacySignaturesFeature)}}function K(t){const{licenseKey:e,instantJSON:n,XFDF:r,disableWebAssembly:o,disableWebAssemblyStreaming:s,disableIndexedDBCaching:a,enableAutomaticLinkExtraction:c,overrideMemoryLimit:u,standaloneInstancesPoolSize:d,trustedCAsCallback:l,baseUrl:f,customFonts:h}=t;if(Object(_.a)("string"==typeof f,"`baseUrl` is mandatory and must be a valid URL, e.g. `https://example.com/"),Object(T.b)(f),Object(_.a)(null==e||"string"==typeof e,"licenseKey must be a string value if provided. Please obtain yours from https://customers.pspdfkit.com."),"string"==typeof e&&Object(_.a)(!e.startsWith("TRIAL-"),"You're using the npm key instead of the license key. This key is used to download the PSPDFKit for Web package via the node package manager.\n\nLeave out the license key to activate as a trial."),Object(_.a)(void 0===r||"string"==typeof r,"XFDF must be a string"),n){Object(_.a)("object"==typeof n&&null!==n,"instantJSON must be an Object"),Object(_.a)(void 0===r,"Cannot import from both instantJSON and XFDF"),Object(_.a)("https://pspdfkit.com/instant-json/v1"===n.format,"instantJSON has an invalid format, please use 'https://pspdfkit.com/instant-json/v1");const{pdfId:t}=n;t&&Object(_.a)("object"==typeof t&&null!==t&&("string"==typeof t.permanent&&"string"==typeof t.changing||"string"!=typeof t.permanent&&"string"!=typeof t.changing),"instantJSON has an invalid pdfId"),Object(_.a)(void 0===n.skippedPdfObjectIds||Array.isArray(n.skippedPdfObjectIds),"instantJSON has invalid skippedPdfObjectIds"),Object(_.a)(void 0===n.annotations||Array.isArray(n.annotations)&&n.annotations.every((t=>"object"==typeof t&&null!==t)),"instantJSON has invalid annotations"),Object(_.a)(void 0===n.formFieldValues||Array.isArray(n.formFieldValues)&&n.formFieldValues.every((t=>"object"==typeof t&&null!==t)),"instantJSON has invalid form field values"),Object(_.a)(void 0===n.skippedPdfBookmarkIds||Array.isArray(n.skippedPdfBookmarkIds),"instantJSON has invalid skippedPdfBookmarkIds"),Object(_.a)(void 0===n.bookmarks||Array.isArray(n.bookmarks)&&n.bookmarks.every((t=>"object"==typeof t&&null!==t)),"instantJSON has invalid bookmarks")}Object(_.a)(void 0===o||"boolean"==typeof o,"disableWebAssembly must be a boolean"),Object(_.a)(void 0===s||"boolean"==typeof s,"disableWebAssemblyStreaming must be a boolean"),Object(_.a)(void 0===c||"boolean"==typeof c,"enableAutomaticLinkExtraction must be a boolean"),Object(_.a)(void 0===u||"number"==typeof u,"overrideMemoryLimit must be a number"),Object(_.a)(void 0===d||"number"==typeof d&&d>=0,"standaloneInstancesPoolSize must be a non-negative number"),Object(_.a)(void 0===l||"function"==typeof l,"trustedCAsCallback must be a function"),Object(_.a)(void 0===h||Array.isArray(h)&&h.every((t=>t instanceof J.a)),"customFonts must be an array of PSPDFKit.Font instances"),Object(_.a)(void 0===h||h.every((t=>t.callback)),"All PSPDFKit.Font instances specified on customFonts must have its callback property defined"),void 0!==a&&Object(i.h)("disableIndexedDbCaching has been deprecated and it no longer has effect. It will be removed in a later version.\nBrowsers dropped IndexedDB serialization of Wasm modules in favor of regular HTTP caching.")}async function V(t){const e=new WeakMap,n={};return{processedOperations:await Promise.all(t.map((async(t,r)=>{if("importDocument"===t.type){const{document:o}=t;return Object(_.a)(o instanceof File||o instanceof Blob,"Wrong `importDocument` operation `document` value: it must be a File or a Blob"),Object(L.a)(e,n,o,t,r,"document")}if("applyInstantJson"===t.type){const o=t.instantJson;Object(_.a)("object"==typeof o&&null!==o,"Wrong `applyInstantJson` operation `instantJson` value: it must be an object");const i=JSON.stringify(o),s=new Blob([i],{type:"application/json"});return Object(L.a)(e,n,s,t,r,"dataFilePath")}if("applyXfdf"===t.type){const o=t.xfdf;Object(_.a)("string"==typeof o,"Wrong `applyXfdf` operation `xfdf` value: it must be a string");const i=new Blob([o],{type:"application/vnd.adobe.xfdf"});return Object(L.a)(e,n,i,t,r,"dataFilePath")}return t}))),operationsDocuments:n}}var z=n(195),X=n(1);let Y;class H extends M{constructor(t){const e=t.baseUrl||Object(r.a)(window.document),n={...t,baseUrl:e};if("string"!=typeof n.baseUrl)throw new i.a("`baseUrl` is mandatory and must be a valid URL, e.g. `https://example.com/`");if("string"!=typeof n.document&&!(n.document instanceof ArrayBuffer))throw new i.a("document must be either an URL to a supported document type (PDF and images), e.g. `https://example.com/document.pdf`, or an `ArrayBuffer`");if(Y&&Y!==n.licenseKey)throw new i.a("Trying to re-use PSPDFKit for Web with a different licenseKey than the previous one.\nUnfortunately we only allow one licenseKey per instance.\nPlease contact support for further assistance.");if("string"==typeof n.licenseKey&&n.licenseKey.startsWith("TRIAL-"))throw new i.a("You're using the npm key instead of the license key. This key is used to download the PSPDFKit for Web package via the node package manager.\n\nLeave out the license key to activate as a trial.");super(n),this.destroyed=!1}async load(t={}){let e;t.progressCallback&&t.progressCallback("loading",.2),e="string"==typeof this._state.document?fetch(this._state.document,{credentials:"same-origin"}).then((t=>t.arrayBuffer())).finally((()=>{t.progressCallback&&t.progressCallback("loading",.5)})):this._state.document;const n=await Q(this.client,this._state).finally((()=>{t.progressCallback&&t.progressCallback("loading",.8)}));Object(i.k)(n);const{features:r,signatureFeatureAvailability:s}=n,a=s===E.a.ELECTRONIC_SIGNATURES&&r.includes(X.z.WEB_ANNOTATION_EDITING)&&this._state.forceLegacySignaturesFeature?E.a.LEGACY_SIGNATURES:s;this._state=this._state.set("features",Object(o.a)(r)).set("signatureFeatureAvailability",a),Y=this._state.licenseKey;const c=await e;let u;try{u=this.destroyed?await new Promise((()=>{})):await this.client.openDocument(c,t.password)}catch(t){throw"INVALID_PASSWORD"===t.message&&this._state.document instanceof ArrayBuffer&&(this._state=this._state.set("document",t.callArgs[0])),"IMAGE_DOCUMENTS_NOT_LICENSED"===t.message&&(t.message="The image documents feature is not enabled for your license key. Please contact support or sales to purchase the UI module for PSPDFKit for Web."),t}this._XFDF&&await this.client.importXFDF(this._XFDF.source,this._XFDF.keepCurrentAnnotations);let d=[];if(h.K.PDF_JAVASCRIPT){const t=await this.client.enablePDFJavaScriptSupport(),e=await this.client.runPDFFormattingScripts();d=Object(x.k)(t,e)}if(this._instantJSON&&this._instantJSON.pdfId&&u.ID.permanent){const t=this._instantJSON.pdfId,e=u.ID;if(t.permanent!==e.permanent)throw new i.a("Could not instantiate from Instant JSON: Permanent PDF ID mismatch.\nPlease use the same PDF document that was used to create this Instant JSON.\nFor more information, please visit: https://pspdfkit.com/guides/web/current/importing-exporting/instant-json/");if(t.changing!==e.changing)throw new i.a("Could not instantiate from Instant JSON: Changing PDF ID mismatch.\nPlease use the same revision of this PDF document that was used to create this Instant JSON.\nFor more information, please visit: https://pspdfkit.com/guides/web/current/importing-exporting/instant-json/")}if(this._trustedCAsCallback)try{const t=await this._trustedCAsCallback();if(!Array.isArray(t))throw new i.a("Certificates response must be an array");if(t.some((t=>!(t instanceof ArrayBuffer)&&"string"!=typeof t)))throw new i.a("All certificates must be passed as ArrayBuffer (DER) or string (PEM)");await this.client.loadCertificates(t.map(D.b))}catch(t){throw new i.a(`Could not retrieve certificates for digital signatures validation: ${t.message}.`)}return this._state=this._state.set("documentResponse",u),{features:this._state.features,signatureFeatureAvailability:this._state.signatureFeatureAvailability,hasPassword:!!t.password,allowedTileScales:"all",jsActionChanges:d}}destroy(){this.destroyed=!0,super.destroy()}}const G={current:void 0};function Q(t,e){var n;return G.current=G.current||(e.customFonts?(n=e.customFonts,Promise.all(n.map((t=>new Promise((e=>{var n;Object(i.k)(t.name),null==t||null===(n=t.callback)||void 0===n||n.call(t,t.name).then((n=>{Object(i.k)(t.name),n instanceof Blob?e({name:t.name,data:n}):(Object(i.i)(`Callback for retrieving font ${t.name} didn't returned a Blob. It returned ${typeof n}`),e())})).catch((n=>{Object(i.i)(`Error returned by callback for retrieving font ${t.name}. ${n}`),e()}))}))))).then((t=>t.filter(Boolean)))):void 0),t.loadNativeModule(e.baseUrl,{mainThreadOrigin:Object(z.a)()||window.location.origin,disableWebAssembly:e.disableWebAssembly,disableWebAssemblyStreaming:e.disableWebAssemblyStreaming,enableAutomaticLinkExtraction:e.enableAutomaticLinkExtraction,overrideMemoryLimit:e.overrideMemoryLimit}).then((async()=>G.current?t.load(e.baseUrl,e.licenseKey,{mainThreadOrigin:Object(z.a)()||window.location.origin,customFonts:await G.current}):t.load(e.baseUrl,e.licenseKey,{mainThreadOrigin:Object(z.a)()||window.location.origin})))}}}]);